webpackJsonp([35],{"Ss/R":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),n=s("bOdI"),o=s.n(n),c=s("mtWM"),r=s.n(c),l=s("b8Zm"),v=s("jZyA"),d=s("NYxO"),p={name:"serviceDetails",data:function(){var t;return t={serviceInfo:{},openID:"",tipsContent:"",errorTipsContent:"",tipsImg:"",tips:!1,loading:!1,categoryList:{A:"交通",B:"社会保障",C:"教育",D:"医疗卫生",E:"民政",H:"出入境",M:"文化体育",G:"旅游",I:"举报",K:"税务",X:"信用",Y:"法规查询",L:"政务",Z:"其他"},hotServiceID:["BAB0001","KAD0004","IAC0003","DAA0001","AAA0001"],hotServiceList:[]},o()(t,"loading",!1),o()(t,"toRouter","serviceDetail"),o()(t,"tipSecond",!1),o()(t,"isFollow","关注"),o()(t,"isRealy",!1),o()(t,"realPageNum",""),o()(t,"userName",""),o()(t,"userOpenID",""),t},mounted:function(){this.getUserInfo&&(this.openID=JSON.parse(this.getUserInfo).openID,this.isFollowMark()),this.getServiceDetail(),this.getHotService()},computed:a()({},Object(d.c)(["getUserInfo"])),components:{MaskTip:l.a,loginMask:v.a},created:function(){},methods:{getServiceDetail:function(){var t=this;r()({headers:{"Content-Type":"application/json"},method:"post",url:"/service/getServiceDetail",data:{serviceID:this.$route.query.id},contentType:"application/json"}).then(function(e){if(200==e.data.code){t.serviceInfo=e.data.results.dataList[0],t.serviceInfo.category=t.serviceInfo.serviceID[0],t.serviceInfo.example=t.serviceInfo.example.split(",");var s=new RegExp("。","g");document.getElementById("mzDetail").innerHTML=t.serviceInfo.relief.replace(s,"。<br>")}else alert("获取服务详情失败")}).catch(function(t){})},toPage:function(t){var e=this;this.$http({headers:{"Content-Type":"application/json"},method:"post",url:"/userInformation/isLogin",async:!0,data:{openID:this.openID},contentType:"application/json"}).then(function(i){"402"==i.data.code?(e.tipSecond=!0,sessionStorage.setItem("serviceDetailID",t),sessionStorage.setItem("serviceDetailName",e.serviceInfo.serviceName)):e.$http({headers:{"Content-Type":"application/json"},method:"post",url:"/procure/getProcureID",async:!0,data:{serviceID:t,openID:e.openID},contentType:"application/json"}).then(function(i){"200"==i.data.code?(e.tips=!0,e.tipsContent="提交申请失败",e.errorTipsContent=e.serviceInfo.serviceName+"已申请",e.tipsImg=s("8oYK")):e.$http({headers:{"Content-Type":"application/json"},method:"post",url:"/userInformation/getUserByOpenID",async:!0,data:{openID:e.openID},contentType:"application/json"}).then(function(i){"success"==i.data.msg?"3"==i.data.results.confirmStatus?e.$router.push({name:"serviceBoxPurchase",params:{serviceID:t},query:{serviceID:t,serviceName:e.serviceInfo.serviceName}}):"0"==i.data.results.confirmStatus?(e.isRealy=!0,e.realPageNum=i.data.results.confirmStatus,e.userName=i.data.results.userName,e.userOpenID=i.data.results.openID):(e.tips=!0,e.tipsContent="提交申请失败",e.errorTipsContent="对不起，该申请暂只支持通过实名认证的企业申请",e.tipsImg=s("8oYK")):alert("数据加载失败")}).catch(function(t){})}).catch(function(t){})}).catch(function(t){})},addMark:function(t){var e=this;if("已关注"!=this.isFollow){var s={openID:this.openID,serviceID:t};this.$http({headers:{"Content-Type":"application/json"},method:"post",url:"/userInformation/isLogin",async:!0,data:{openID:this.openID},contentType:"application/json"}).then(function(i){"402"==i.data.code?(e.tipSecond=!0,sessionStorage.setItem("serviceDetailID",t),sessionStorage.setItem("serviceDetailName",e.serviceInfo.serviceName)):e.$http({method:"post",url:"/userMark/addMark",data:s}).then(function(t){var s=t.data;"200"==s.code?null!=s.info?(e.isFollow="已关注",e.getServiceDetail()):e.isFollow="关注":alert("请求参数不完整")}).catch(function(t){alert(t)})}).catch(function(t){alert(t)})}},isFollowMark:function(){var t=this,e={openID:this.openID,serviceID:this.$route.query.id};this.$http({method:"post",url:"/userMark/isFollow",data:e}).then(function(e){var s=e.data;"200"==s.code&&null!=s.info?t.isFollow="已关注":t.isFollow="关注"}).catch(function(t){alert(t)})},toServicePage:function(){this.$router.push({path:"/dataService",name:"dataService"})},closeDialog:function(t){this.tips=t,this.tipSecond=t},getHotService:function(){var t=this;r()({headers:{"Content-Type":"application/json"},method:"post",url:"/service/getHotService",data:{hotServiceID:this.hotServiceID},contentType:"application/json"}).then(function(e){200==e.data.code?t.hotServiceList=e.data.results.dataList:alert("获取热门服务失败")}).catch(function(t){})},renderTo:function(t){t&&this.$router.push({path:"/serviceDetails",name:"serviceDetails",query:{id:t}})},toTop:function(){document.body.scrollTop=document.documentElement.scrollTop=0},goConfirmStatuso:function(){"0"==this.realPageNum?this.$router.push({path:"/home/personalRealName/realNameMainCon"}):this.$router.push({path:"/home/personalRealName/realNameDetails"})},close:function(){this.bus.$emit("headInforShow",this.userName),this.bus.$emit("userOpenID",this.userOpenID),this.isRealy=!1}},watch:{$route:function(t,e){this.getServiceDetail(),this.getUserInfo&&this.isFollowMark()},isFollow:{handler:function(){this.getServiceDetail(),this.getUserInfo&&this.isFollowMark()}}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container"},[s("div",{staticClass:"currentLocation"},[s("span",[t._v("当前位置：")]),t._v(" "),s("span",{on:{click:function(e){return t.toServicePage()}}},[t._v("数据服务")]),t._v(" "),s("span",{staticClass:"symbol"},[t._v(">")]),t._v(" "),s("span",[t._v(t._s(t.serviceInfo.serviceName))])])]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"padTB whiteBG clearfix"},[s("div",{staticClass:"serviceLogo"},[s("div",{staticClass:"serLogoPic"},[s("img",{attrs:{src:t.serviceInfo.logo}})]),t._v(" "),s("div",{staticClass:"logoBom clearfix"},[s("div",{staticClass:"percent33"},[s("i",{staticClass:"icon-deltails icon-serviceID"}),t._v(" "),s("p",[t._v(t._s(t.serviceInfo.serviceID))])]),t._v(" "),s("div",{staticClass:"percent33"},[s("i",{staticClass:"icon-deltails icon-salesVolume"}),t._v(" "),s("p",[t._v(t._s(t.serviceInfo.saleNum||0))])]),t._v(" "),s("div",{staticClass:"percent33"},[s("i",{staticClass:"icon-deltails icon-attentionVolume"}),t._v(" "),s("p",[t._v(t._s(t.serviceInfo.markNum||0))])])])]),t._v(" "),s("div",{staticClass:"serviceApply"},[s("div",{staticClass:"tit"},[t._v(t._s(t.serviceInfo.serviceName))]),t._v(" "),s("div",{staticClass:"description"},[t._v(t._s(t.serviceInfo.summary))]),t._v(" "),s("div",{staticClass:"price"},[s("label",[t._v("价格：")]),s("span",[t._v(t._s(t.serviceInfo.price<=0?"免费":"面议"))])]),t._v(" "),s("div",{staticClass:"type clearfix"},[s("label",{staticClass:"fl"},[t._v("类型：")]),t._v(" "),s("div",{staticClass:"fl selectType"},[s("span",{class:{selected:2==t.serviceInfo.serviceType}},[2==t.serviceInfo.serviceType?s("i",{staticClass:"icon-deltails icon-selected"}):t._e(),t._v("服务")]),t._v(" "),s("span",{class:{selected:3==t.serviceInfo.serviceType}},[3==t.serviceInfo.serviceType?s("i",{staticClass:"icon-deltails icon-selected"}):t._e(),t._v("API")])])]),t._v(" "),s("div",{staticClass:"range"},[s("label",[t._v("服务范围：")]),s("span",[t._v(t._s(t.serviceInfo.cityName))])]),t._v(" "),s("div",{staticClass:"btnBox"},[s("a",{staticClass:"btnApply",attrs:{href:"javascript:;"},on:{click:function(e){return t.toPage(t.serviceInfo.serviceID)}}},[t._v("立即申请")]),t._v(" "),s("a",{staticClass:"btnAttention",class:{active:"已关注"==this.isFollow},attrs:{href:"javascript:;"},on:{click:function(e){return t.addMark(t.serviceInfo.serviceID)}}},[s("i",{staticClass:"icon-deltails icon-attention"}),t._v(t._s(t.isFollow)+"\n          ")])])])])]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"tabList"},[s("div",{staticClass:"tabCon"},[s("div",{staticClass:"ListCon",attrs:{id:"fwxq"}},[t._m(0),t._v(" "),s("div",{staticClass:"tableBox whiteBG"},[s("table",{staticClass:"table"},[s("tr",[s("td",[t._v("服务名称")]),t._v(" "),s("td",[t._v(t._s(t.serviceInfo.serviceName))])]),t._v(" "),s("tr",[s("td",[t._v("服务分类")]),t._v(" "),s("td",[t._v(t._s(t.categoryList[t.serviceInfo.category]))])]),t._v(" "),s("tr",[s("td",[t._v("服务范围")]),t._v(" "),s("td",[t._v(t._s(t.serviceInfo.cityName))])]),t._v(" "),s("tr",[s("td",[t._v("服务期限")]),t._v(" "),s("td",[t._v(t._s(t.serviceInfo.deadline))])]),t._v(" "),t._m(1),t._v(" "),s("tr",[s("td",[t._v("详细介绍")]),t._v(" "),s("td",[t._v(t._s(t.serviceInfo.detail))])])])])]),t._v(" "),s("div",{staticClass:"ListCon",attrs:{id:"fwsl"}},[t._m(2),t._v(" "),s("div",{staticClass:"serviceExample whiteBG clearfix"},t._l(t.serviceInfo.example,function(t){return s("div",{staticClass:"sampleGraph"},[s("img",{attrs:{src:t}})])}),0)]),t._v(" "),s("div",{staticClass:"ListCon",attrs:{id:"mzsm"}},[t._m(3),t._v(" "),s("div",{staticClass:"statement whiteBG clearfix"},[s("span",{attrs:{id:"mzDetail"}},[t._v(t._s(t.serviceInfo.relief))])])])])])]),t._v(" "),s("div",{staticClass:"container serviceSortBox"},[t._m(4),t._v(" "),s("div",{staticClass:"clearfix marBom"},[s("div",{staticClass:"publicListBox ListBgWhite"},[s("ul",{staticClass:"clearfix"},t._l(t.hotServiceList,function(e){return s("li",[s("div",{staticClass:"pubListDiv"},[s("div",{staticClass:"publicIcon"},[s("img",{attrs:{src:e.logo}})]),t._v(" "),s("div",{staticClass:"publicBigTit"},[t._v(t._s(e.serviceName))]),t._v(" "),s("div",{staticClass:"publicDescription"},[t._v(t._s(e.summary))]),t._v(" "),s("div",{staticClass:"publicBtnDetails"},[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return t.renderTo(e.serviceID)}}},[t._v("查看详情")])])])])}),0)])])]),t._v(" "),s("MaskTip",{attrs:{tips:t.tips,tipsContent:t.tipsContent,errorTipsContent:t.errorTipsContent,tipsImg:t.tipsImg,loading:t.loading,toRouter:t.toRouter},on:{listenToChildEvent:t.closeDialog}}),t._v(" "),s("loginMask",{attrs:{tipSecond:t.tipSecond},on:{listenToChildEvent:t.closeDialog}}),t._v(" "),s("div",{staticClass:"floatMenu"},[s("i",{staticClass:"icon-floatMenu icon-upTop",on:{click:function(e){return t.toTop()}}})]),t._v(" "),t.isRealy?s("div",[s("div",{staticClass:"mask"}),t._v(" "),s("div",{staticClass:"dialog-container"},[s("div",{staticClass:"dialog-inner ht286"},[s("header",{staticClass:"dialog-header"},[s("div",{staticClass:"dialog-header-tit fl"},[t._v("提示")]),t._v(" "),s("div",{staticClass:"icon-verPic icon-dialogClose fr",on:{click:function(e){return t.close()}}})]),t._v(" "),s("div",{staticClass:"dialog-body"},[t._m(5),t._v(" "),s("div",{staticClass:"dialog-realNamePrompt"},[t._v("对不起，该申请暂只支持已通过实名认证的用户使用")]),t._v(" "),s("div",{staticClass:"btnGoCertifi"},[s("a",{attrs:{href:"javascript:;"},on:{click:t.goConfirmStatuso}},[t._v("去认证")])])])])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tabConTit"},[e("span"),this._v("服务详情")])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",[this._v("服务提供方式")]),this._v(" "),e("td",[this._v("公共服务打包输出"),e("span",[this._v("（注：政务数据与服务集成的公共服务可按照事项内容封装并整体提供，包括整套服务页面及服务内容，需求方可以直接进行调用。）")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tabConTit"},[e("span"),this._v("服务示例")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tabConTit"},[e("span"),this._v("免责声明")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tabConTit"},[e("span"),this._v("热门推荐")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dialog-realNamePic"},[e("img",{attrs:{src:s("8oYK")}})])}]};var h=s("VU/8")(p,u,!1,function(t){s("yD9q")},null,null);e.default=h.exports},yD9q:function(t,e){}});