webpackJsonp([10],{"4OtV":function(t,a){},BO1k:function(t,a,e){t.exports={default:e("fxRn"),__esModule:!0}},Pqdz:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("BO1k"),i=e.n(s),n=e("Dd8w"),l=e.n(n),r=e("mtWM"),o=e.n(r),c=e("NYxO"),v={name:"monitorManage",data:function(){return{openID:"",rows:10,page:1,sort:{isStart:-1,statusCode:-1,time:-1},keyword:"",serviceList:[],serviceCount:0,emailShow:!1,emailList:[],newEmailList:[]}},computed:l()({},Object(c.c)(["getUserInfo"])),mounted:function(){this.openID=this.getUserInfo?JSON.parse(this.getUserInfo).openID:"",window.addEventListener("click",this.handleSelect),this.getUserServiceList()},methods:{getUserServiceList:function(t){var a=this;1==t&&(this.page=1),o()({headers:{"Content-Type":"application/json"},method:"post",url:"/tmpMonitor/getUserServiceList",data:{query:{openID:this.openID,status:2},page:this.page,rows:this.rows,keyword:this.keyword}}).then(function(t){200==t.data.code&&(a.serviceList=t.data.results.dataList,a.serviceCount=t.data.results.dataCount)})},getEmailList:function(){var t=this;o()({headers:{"Content-Type":"application/json"},method:"get",url:"/userInformation/getWarnEmail?openID="+this.openID}).then(function(a){200==a.data.code&&(t.emailList=a.data.results)}).catch(function(t){})},showEmail:function(){this.emailShow=!0,this.getEmailList()},closeEmail:function(){this.emailShow=!1,this.newEmailList=[]},addEmail:function(){this.newEmailList.push({name:"",email:""})},modifyEmail:function(){var t=this,a=this.emailList.concat(this.newEmailList),e="";if(a.length<1)alert("请添加预警邮箱");else{var s=!0,n=!1,l=void 0;try{for(var r,c=i()(a);!(s=(r=c.next()).done);s=!0){var v=r.value;e+=v.name+"<"+v.email+">;"}}catch(t){n=!0,l=t}finally{try{!s&&c.return&&c.return()}finally{if(n)throw l}}e=e.substr(0,e.length-1),o()({headers:{"Context-Type":"application/json"},method:"post",url:"/userInformation/modifyWarnEmail",data:{openID:this.openID,warnEmail:e}}).then(function(a){200==a.data.code?(alert("预警邮箱修改成功"),t.closeEmail()):alert("修改失败")})}},deleteEmail:function(t){this.emailList.splice(t,1)}}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("div",{staticClass:"rm-main-box"},[e("div",{staticClass:"rl-main-aside clearfix"},[e("a",{staticClass:"rl-operate-btn active fr btnSearch",attrs:{href:"javascript:;",title:"预警邮箱"},on:{click:t.showEmail}},[t._v("预警邮箱"),e("i",{staticClass:"icon-verPic icon-emailWarn"})]),t._v(" "),e("a",{staticClass:"rl-operate-btn active fr btnSearch",attrs:{href:"javascript:;",title:"查询"},on:{click:function(a){return t.getUserServiceList(!0)}}},[t._v("查询")]),t._v(" "),e("div",{staticClass:"resource-sort-search-box fr"},[e("label",{staticClass:"downMenuTit fl"},[t._v("关键字：")]),t._v(" "),e("div",{staticClass:"textInputBox fl"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"inner-search-inp wdh226",attrs:{type:"search",placeholder:"请输入服务名称关键字"},domProps:{value:t.keyword},on:{input:function(a){a.target.composing||(t.keyword=a.target.value)}}})])])]),t._v(" "),e("table",{staticClass:"mainTable"},[t._m(1),t._v(" "),e("tbody",t._l(t.serviceList,function(a){return e("tr",[e("td",[t._v(t._s(a.serviceName))]),t._v(" "),e("td",[t._v(t._s(2==a.serviceType?"服务":"API"))]),t._v(" "),e("td",[e("div",{staticClass:"addressBox"},[e("span",{staticClass:"ellipsis"},[t._v(t._s(a.city))])])]),t._v(" "),e("td",[t._v("接口无法调用")]),t._v(" "),e("td",{staticClass:"center"},[e("span",{staticClass:"status",class:{passed:"0"==a.statusCode||"000000"==a.statusCode,abnormal:"0"!=a.statusCode||"000000"!=a.statusCode}},[t._v(t._s("0"==a.statusCode||"000000"==a.statusCode?"正常":"异常"))])]),t._v(" "),e("td",[t._v(t._s(a.time))])])}),0)]),t._v(" "),t.serviceCount>0?e("div",{staticClass:"page-box clearfix"},[e("div",{staticClass:"fl"},[e("div",{staticClass:"page-go-box"},[e("span",{staticClass:"page-txt"},[t._v("显示"),e("label",[t._v(t._s(t.serviceCount))]),t._v("个条目中的第"),e("label",[t._v(t._s((t.page-1)*t.rows+1))]),t._v("至"),e("label",[t._v(t._s(t.page*t.rows))]),t._v("个")])])]),t._v(" "),e("div",{staticClass:"page-main pageJump fr"},[e("span",{staticClass:"page-txt pageTotal fl"},[t._v("共"+t._s(Math.ceil(t.serviceCount/t.rows))+"页")]),t._v(" "),e("ul",{staticClass:"page-list fl"},[e("el-pagination",{attrs:{"current-page":t.page,"page-size":t.rows,layout:"prev, pager, next, jumper",total:t.serviceCount},on:{"size-change":t.getUserServiceList,"current-change":t.getUserServiceList,"update:currentPage":function(a){t.page=a},"update:current-page":function(a){t.page=a}}})],1),t._v(" "),t._m(2)])]):t._e(),t._v(" "),t.serviceCount<1?e("div",{staticClass:"noRecordList htvh"},[t._m(3),t._v(" "),e("div",{staticClass:"noRecorWord"},[t._v("没有申请记录哦~")])]):t._e()])]),t._v(" "),t.emailShow?e("div",{staticClass:"mask"}):t._e(),t._v(" "),t.emailShow?e("div",{staticClass:"dialog-container add-catalog-dialog"},[e("div",{staticClass:"dialog-inner dialog-ht358"},[e("header",{staticClass:"dialog-header"},[e("div",{staticClass:"dialog-header-tit fl"},[t._v("预警邮箱设置")]),t._v(" "),e("div",{staticClass:"icon-verPic icon-dialogClose fr",on:{click:t.closeEmail}})]),t._v(" "),e("div",{staticClass:"dialog-body"},[e("div",{staticClass:"serviceAbnormalTit"},[t._v("服务异常时，给下列联系人发送邮件。")]),t._v(" "),e("div",{staticClass:"addWarnEmailBox"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.addEmail()}}},[e("i",{staticClass:"icon-verPic icon-addWarnEmail"}),t._v("添加预警邮箱\n          ")])]),t._v(" "),e("div",{staticClass:"mailListBox"},[t._m(4),t._v(" "),e("div",{staticClass:"mailListCon"},[t._l(t.emailList,function(a,s){return e("div",{staticClass:"mailTit"},[e("span",{staticClass:"name"},[t._v(t._s(a.name))]),t._v(" "),e("span",{staticClass:"mail ellipsis"},[t._v(t._s(a.email))]),t._v(" "),e("i",{staticClass:"icon-list icon-mailDelete",on:{click:function(a){return t.deleteEmail(s)}}})])}),t._v(" "),t._l(t.newEmailList,function(a){return e("div",{staticClass:"mailTit"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.name,expression:"item.name"}],staticClass:"addName",attrs:{type:"text",placeholder:"姓名"},domProps:{value:a.name},on:{input:function(e){e.target.composing||t.$set(a,"name",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:a.email,expression:"item.email"}],staticClass:"addEmail",attrs:{type:"text",placeholder:"邮箱"},domProps:{value:a.email},on:{input:function(e){e.target.composing||t.$set(a,"email",e.target.value)}}})])})],2)])]),t._v(" "),e("footer",{staticClass:"dialog-footer"},[e("ul",{staticClass:"btn-list clearfix"},[e("li",{staticClass:"btn-item btn-item-acvite",on:{click:t.modifyEmail}},[t._v("确  认")]),t._v(" "),e("li",{staticClass:"btn-item",on:{click:t.closeEmail}},[t._v("取  消")])])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"serviceMainCon"},[a("div",{staticClass:"welcomeTitle clearfix"},[a("span",[this._v("当前位置：")]),this._v(" "),a("span",[this._v("服务管理")]),this._v(" "),a("span",[this._v(">")]),this._v(" "),a("span",[this._v("监控管理")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("服务名称")]),t._v(" "),e("th",{attrs:{width:"12%"}},[t._v("服务类型")]),t._v(" "),e("th",{attrs:{width:"20%"}},[t._v("服务范围")]),t._v(" "),e("th",{attrs:{width:"14%"}},[t._v("监控类型")]),t._v(" "),e("th",{staticClass:"center",attrs:{width:"12%"}},[t._v("运行状态")]),t._v(" "),e("th",{attrs:{width:"19%"}},[t._v("监测时间")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"page-go-box fl"},[a("a",{staticClass:"page-btn",attrs:{href:"javascript:;"}},[this._v("确定")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"noRecordPicBox"},[a("img",{attrs:{src:e("tbjl")}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"mailTit"},[a("span",{staticClass:"name"},[this._v("姓名")]),this._v(" "),a("span",{staticClass:"mail"},[this._v("邮箱")])])}]};var m=e("VU/8")(v,d,!1,function(t){e("4OtV"),e("jm42")},"data-v-b13825fe",null);a.default=m.exports},fxRn:function(t,a,e){e("+tPU"),e("zQR9"),t.exports=e("g8Ux")},g8Ux:function(t,a,e){var s=e("77Pl"),i=e("3fs2");t.exports=e("FeBl").getIterator=function(t){var a=i(t);if("function"!=typeof a)throw TypeError(t+" is not iterable!");return s(a.call(t))}},jm42:function(t,a){}});