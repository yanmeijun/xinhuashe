webpackJsonp([9],{FmVf:function(e,t,s){e.exports=s.p+"img/loginPic.93a8b39.png"},QOGh:function(e,t){},W2Q3:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("mvHQ"),i=s.n(r),o=s("Dd8w"),n=s.n(o),a=s("mtWM"),l=s.n(a),c=s("NYxO"),d=s("EuEE"),m={name:"container",data:function(){return{headMenu:[{title:"首页",hrefName:"/"},{title:"数据服务",hrefName:"/serviceCommonPage"},{title:"开放平台",hrefName:"/devPlatform"},{title:"服务支持",hrefName:"/serviceSupport"}]}},mounted:function(){this.$refs.transtionX.style.display="none"},computed:{},components:{},created:function(){},methods:{enter:function(e){this.$refs.transtionX.style.display="block";var t=document.getElementById("menu"+e);2==t.innerText.length?this.$refs.transtionX.style.left="44px":this.$refs.transtionX.style.left=t.offsetLeft+56+"px";for(var s=0;s<4;s++)document.getElementById("menu"+s).classList.contains("selected")&&document.getElementById("menu"+s).classList.remove("selected");t.classList.add("selected")},leave:function(e){for(var t=0;t<4;t++)document.getElementById("menu"+t).classList.contains("selected")&&document.getElementById("menu"+t).classList.remove("selected"),this.$refs.transtionX.style.display="none"}}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loginLogo"},[r("div",{staticClass:"newLogin container"},[r("img",{staticClass:"fl",attrs:{src:s("vWKN")}}),e._v(" "),r("div",{staticClass:"header-menu fl",staticStyle:{position:"relative"}},[e._l(e.headMenu,function(t,s){return r("router-link",{key:s,attrs:{to:{path:t.hrefName},id:"menu"+s},nativeOn:{mouseover:function(t){return e.enter(s)},mouseout:function(t){return e.leave(s)}}},[e._v(e._s(t.title))])}),e._v(" "),r("span",{ref:"transtionX",staticClass:"transtionX"})],2)])])},staticRenderFns:[]};var f={data:function(){return{beginVerification:!1,beginTimespan:0,beginClientX:0,mouseMoveStata:!1,maxwidth:"",confirmWords:"拖动滑块验证",confirmSuccess:!1}},methods:{mousedownFn:function(e){this.confirmSuccess||(e.preventDefault&&e.preventDefault(),this.mouseMoveStata=!0,this.beginClientX=e.clientX)},successFunction:function(){this.confirmSuccess=!0,this.confirmWords="验证通过",window.addEventListener?(document.getElementsByTagName("html")[0].removeEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].removeEventListener("mouseup",this.moseUpFn)):document.getElementsByTagName("html")[0].removeEventListener("mouseup",function(){}),document.getElementsByClassName("drag_text")[0].style.color="#fff",document.getElementsByClassName("handler")[0].style.left=this.maxwidth+"px",document.getElementsByClassName("drag_bg")[0].style.width=this.maxwidth+"px"},mouseMoveFn:function(e){var t=this;if(this.mouseMoveStata){var s=e.clientX-this.beginClientX;s>0&&s<=this.maxwidth?(document.getElementsByClassName("handler")[0].style.left=s+"px",document.getElementsByClassName("drag_bg")[0].style.width=s+"px"):s>this.maxwidth&&(this.beginVerification||(this.beginVerification=!0,l()({headers:{"Content-Type":"application/json"},method:"post",url:"/userInformation/verification",async:!0,data:{code:window.btoa(i()({beginTimespan:this.beginTimespan,finishTimespan:Date.now()}))},contentType:"application/json"}).then(function(e){var s=document.getElementById("verificationCode");"200"==e.data.code&&(t.successFunction(),t.beginVerification=!1,s&&s.setAttribute("data-verification","1"))})))}},moseUpFn:function(e){this.beginTimespan=this.beginTimespan||0,this.mouseMoveStata=!1,e.clientX-this.beginClientX<this.maxwidth&&(document.getElementsByClassName("handler")[0].style.left="0px",document.getElementsByClassName("drag_bg")[0].style.width="0px")}},mounted:function(){this.maxwidth=this.$refs.dragDiv.clientWidth-this.$refs.moveDiv.clientWidth,document.getElementsByTagName("html")[0].addEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].addEventListener("mouseup",this.moseUpFn)}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"dragDiv",staticClass:"drag"},[s("div",{staticClass:"drag_bg"}),e._v(" "),s("div",{staticClass:"drag_text"},[e._v(e._s(e.confirmWords))]),e._v(" "),s("div",{ref:"moveDiv",staticClass:"handler handler_bg",class:{handler_ok_bg:e.confirmSuccess},staticStyle:{position:"absolute",top:"0px",left:"0px"},on:{mousedown:function(t){return e.mousedownFn(t)}}})])},staticRenderFns:[]};var g,p={name:"login",data:function(){return{focusUserName:!1,focusPassword:!1,focusCode:"",placeCode:"验证码不能为空",passwordRules:"密码不能为空，请重新输入！",focusClass:!1,focusUserCon:"用户名不能为空，请重新输入！",loginForm:{userName:"",password:"",identifyCode:"",openID:""},noticeTag:!0,remember:!1,rules:{userName:[{required:!0,message:"请输入用户名/手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],identifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},showLogin:!1,codeTitle:"获取验证码",isOpencode:!1,error:"",errorTip:""}},components:{serviceHead:s("VU/8")(m,u,!1,function(e){s("QOGh")},"data-v-4afd22d6",null).exports,verification:s("VU/8")(f,h,!1,function(e){s("fXzT")},"data-v-55dce69b",null).exports},mounted:function(){if(this.$route.params.name){this.sendLoginState("0"),this.$message({type:"error",duration:4e3,message:"登陆时效已过期，请重新登陆！"});var e={};this.getUserInfo&&this.getCookie()&&(e=JSON.parse(this.getUserInfo)),this.remember=!0,this.loginForm.userName=e.userName}if(this.showLogin=!0,this.getUserInfo&&this.getCookie()){var t=JSON.parse(this.getUserInfo);this.sendUserInfo(this.getUserInfo),this.remember=!0,this.loginForm.userName=t.userName}},updated:function(){},computed:n()({},Object(c.d)(["userInfo"]),Object(c.c)(["getUserInfo"])),methods:n()({},Object(c.b)(["sendUserInfo","sendRoutePath","sendFunctionInfo","sendLoginState"]),{submitForm:function(e){var t=this;this.validateNumbers(),this.$refs[e].validate(function(e){if(e){-1!=t.loginForm.userName.indexOf(" ")&&(t.loginForm.userName=t.loginForm.userName.replace(/\s/g,"")),-1!=t.loginForm.password.indexOf(" ")&&(t.loginForm.password=t.loginForm.password.replace(/\s/g,""));if(!t.loginForm.userName)return t.error=!0,void(t.errorTip="请输入用户名/手机号");if(t.error=!1,-1!=t.loginForm.password.indexOf(" ")&&(t.loginForm.userName=t.loginForm.userName.replace(/\s/g,"")),!t.loginForm.password)return t.errorTip="请输入密码",void(t.error=!0);var s=document.getElementById("verificationCode");if(!s||"1"!==s.getAttribute("data-verification"))return t.errorTip="请拖动滑块验证",t.error=!0,void t.createCode();l()({headers:{"Content-Type":"application/json"},method:"post",url:"/userInformation/login",async:!0,data:{userName:t.loginForm.userName.trim(),password:Object(d.b)(t.loginForm.password.trim())},contentType:"application/json"}).then(function(e){"200"==e.data.code?(t.loginForm.openID=e.data.openID,t.loginForm.userName=e.data.userName,t.sendUserInfo(i()(t.loginForm)),1==t.remember?t.setCookie(t.loginForm.userName,"",7):t.setCookie("","",""),t.sendLoginState("1"),"3"==e.data.confirmStatus?t.$router.push({path:"/home/personalCenter"}):"0"==e.data.confirmStatus?t.$router.push({path:"/home/personalRealName/realNameMainCon"}):t.$router.push({path:"/home/personalRealName/realNameDetails"})):"201"==e.data.code?(t.errorTip="用户名或密码错误",t.error=!0):"203"==e.data.code?(t.errorTip="账号被停用",t.error=!0):"404"==e.data.code?(t.errorTip="该用户不存在",t.error=!0):"500"==e.data.code?(t.errorTip="用户名或密码为空",t.error=!0):"203"==e.data.code&&(t.errorTip="该账号已停用",t.error=!0)}).catch(function(e){})}})},register:function(){this.$router.push({path:"/register",name:"register"})},forgetPwd:function(){this.$router.push({path:"/forgetPwd",name:"forgetPwd"})},setCookie:function(e,t,s){var r=new Date;r.setTime(r.getTime()+864e5*s),window.document.cookie="userName="+e+";path=/;expires="+r.toGMTString(),window.document.cookie="password="+t+";path=/;expires="+r.toGMTString()},getCookie:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var s=e[t].split("=");"userName"==s[0]?this.loginForm.userName=s[1]:"password"==s[0]&&(this.loginForm.password=s[1])}return this.loginForm.userName},clearCookie:function(){this.setCookie("","","-1")},handleUserFocus:function(e){},handleUserBlur:function(){this.error=!1,this.loginForm.userName||(this.errorTip="请输入用户名/手机号",this.error=!0)},handlePwdFocus:function(e){this.error=!1,this.loginForm.password||(this.errorTip="请输入密码",this.error=!0)},handleCodeFocus:function(e){this.error=!1},createCode:function(){g="";for(var e=new Array(1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","j","k","l","m","n","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V","W","X","Y","Z"),t=0;t<4;t++){var s=Math.floor(60*Math.random());g+=e[s]}4!=g.trim().length&&this.createCode(),this.showCheck(g)},showCheck:function(e){var t=document.getElementById("myCanvas").getContext("2d");t.clearRect(0,0,1e3,1e3),t.font="80px 'Microsoft Yahei'",t.fillText(e,50,100),t.fillStyle="black"},validateNumbers:function(){this.error=!1;if(!this.loginForm.userName)return this.error=!0,void(this.errorTip="请输入用户名/手机号");this.error=!1,-1!=this.loginForm.password.indexOf(" ")&&(this.loginForm.userName=this.loginForm.userName.replace(/\s/g,""));if(!this.loginForm.password)return this.error=!0,void(this.errorTip="请输入密码");if(-1!=this.$refs.pass.value.indexOf(" ")&&(this.$refs.pass.value=this.$refs.pass.value.replace(/\s/g,"")),!/(?!^(\d+|[a-zA-Z]+|[~!@#$%^&*?]+)$)^[\w~!@#$%^&*?]{6,16}$/.exec(this.$refs.pass.value))return this.errorTip="6-16位，数字/字母/字符至少包含2种",void(this.error=!0);if(/[`~!@#$%^&*_+<>{}\/'[\]]/im.test(this.$refs.pass.value))return this.errorTip="密码格式不正确！",void(this.error=!0);if(this.error=!1,"sb".length<=0)return this.errorTip="验证码不能为空",this.error=!0,void this.createCode();if("sb"!="sb".trim())return this.errorTip="验证码错误",this.error=!0,void this.createCode();if(this.loginForm.userName)this.error=!1;else{if(!this.loginForm.password)return void(this.error=!0);this.error=!1}},enter:function(e){var t=document.getElementById("menu"+e);2==t.innerText.length?this.$refs.transtionX.style.left="44px":this.$refs.transtionX.style.left=t.offsetLeft+56+"px";for(var s=0;s<4;s++)document.getElementById("menu"+s).classList.contains("selected")&&document.getElementById("menu"+s).classList.remove("selected");t.classList.add("selected")},leave:function(){}}),watch:{sendUserInfo:function(e){this.remember=!0},error:{handler:function(){}}}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loginBg",attrs:{id:"login"}},[s("serviceHead"),e._v(" "),s("div",{staticClass:"loginCon clearfix"},[e._m(0),e._v(" "),s("div",{staticClass:"loginBox fr"},[s("h1",{staticClass:"loginTitle"},[e._v("密码登录")]),e._v(" "),s("div",{staticClass:"tab-pane"},[s("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules}},[e.error?s("div",{staticClass:"allErrorTips"},[s("i",{staticClass:"icon-errorTopPic"}),e._v("\n            "+e._s(e.errorTip)+"\n          ")]):e._e(),e._v(" "),s("div",{staticClass:"login-input-box"},[s("i",{staticClass:"icon-userName"}),e._v(" "),s("el-input",{staticClass:"login_input1 form-control new-form-control",class:{active:e.focusUserName},attrs:{name:"userName",placeholder:e.rules.userName[0].message,type:"text"},on:{blur:function(t){return e.handleUserBlur()}},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),e._v(" "),s("div",{staticClass:"login-input-box"},[s("i",{staticClass:"icon-pwd"}),e._v(" "),s("el-input",{ref:"pass",staticClass:"login_input1 form-control",class:{active:e.focusPassword},attrs:{placeholder:e.rules.password[0].message,type:"password"},on:{blur:function(t){return e.handlePwdFocus()}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),s("div",{staticClass:"login-code",attrs:{id:"verificationCode"}},[s("verification"),e._v(" "),s("div",{staticClass:"clearfix",staticStyle:{display:"none"}},[s("div",{staticClass:"v-code-input fl"},[s("i",{staticClass:"icon-v-code"}),e._v(" "),s("el-input",{staticClass:"login_input1 form-control code_input1",class:{active:e.focusCode},attrs:{placeholder:e.rules.identifyCode[0].message,type:"text"},on:{blur:function(t){return e.handleCodeFocus(!1)}},model:{value:e.loginForm.identifyCode,callback:function(t){e.$set(e.loginForm,"identifyCode",t)},expression:"loginForm.identifyCode"}}),e._v(" "),s("span",{staticClass:"icon-user-delete"})],1),e._v(" "),s("div",{staticClass:"v-code-box fr"},[s("canvas",{staticClass:"J_codeimg",attrs:{id:"myCanvas"},on:{click:e.createCode}},[e._v("对不起，您的浏览器不支持canvas，请下载最新版浏览器!")])])])],1)]),e._v(" "),s("div",{staticClass:"dlk"},[s("div",[s("div",{staticClass:"noAccount-reg fl"},[e._v("\n              还没有账号，\n              "),s("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.register()}}},[e._v("\n                立即注册\n                "),s("i",{staticClass:"icon-reg"})])]),e._v(" "),s("div",{staticClass:"forgetPwd fr"},[s("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.forgetPwd()}}},[e._v("忘记密码？")])])]),e._v(" "),s("input",{attrs:{id:"loginHref",type:"button",value:"登录"},on:{click:[function(t){return e.submitForm("loginForm")},function(e){e.stopPropagation()}]},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loginForm")}}})])],1)])]),e._v(" "),e._m(1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loginPic fl"},[t("img",{attrs:{src:s("FmVf")}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loginFooter"},[this._v("\n    © CopyRight 2019 开普云 kaipuyun.cn All Rights Reserved\n    "),t("br"),this._v(" "),t("span",[this._v("版权所有 京TCP备14035494号-1")])])}]};var C=s("VU/8")(p,v,!1,function(e){s("e7ir"),s("n1wj")},"data-v-2444176c",null);t.default=C.exports},e7ir:function(e,t){},fXzT:function(e,t){},n1wj:function(e,t){}});